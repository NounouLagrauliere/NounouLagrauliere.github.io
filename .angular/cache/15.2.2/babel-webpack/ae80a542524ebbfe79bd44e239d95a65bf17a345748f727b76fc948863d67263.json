{"ast":null,"code":"import _asyncToGenerator from \"C:/Workspace/NounouLagrauliere.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { createAuth0Client } from '@auth0/auth0-spa-js';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nexport class AuthService {\n  constructor() {}\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.auth0Client = yield createAuth0Client({\n        domain: environment.auth0.domain,\n        clientId: environment.auth0.clientId,\n        authorizationParams: {\n          redirect_uri: environment.auth0.redirectUri,\n          audience: environment.auth0.audience\n        }\n      });\n      yield _this.auth0Client.loginWithRedirect();\n    })();\n  }\n  handleRedirectCallback() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.auth0Client = yield createAuth0Client({\n        domain: environment.auth0.domain,\n        clientId: environment.auth0.clientId,\n        authorizationParams: {\n          redirect_uri: environment.auth0.redirectUri,\n          audience: environment.auth0.audience\n        }\n      });\n      yield _this2.auth0Client.handleRedirectCallback();\n    })();\n  }\n  isAuthenticated() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      return yield _this3.auth0Client.isAuthenticated();\n    })();\n  }\n  logout() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      return yield _this4.auth0Client.logout({\n        clientId: environment.auth0.clientId,\n        logoutParams: {\n          returnTo: `${window.location.origin}`\n        }\n      });\n    })();\n  }\n  getUser() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const user = yield _this5.auth0Client.getUser();\n      return user;\n    })();\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)();\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AACA,SAAsBA,iBAAiB,QAAQ,qBAAqB;AACpE,SAASC,WAAW,QAAQ,8BAA8B;;AAK1D,OAAM,MAAOC,WAAW;EAItBC,eAAgB;EAEVC,KAAK;IAAA;IAAA;MACT,KAAI,CAACC,WAAW,SAASL,iBAAiB,CAAC;QACzCM,MAAM,EAAEL,WAAW,CAACM,KAAK,CAACD,MAAM;QAChCE,QAAQ,EAAEP,WAAW,CAACM,KAAK,CAACC,QAAQ;QACpCC,mBAAmB,EAAE;UACnBC,YAAY,EAAET,WAAW,CAACM,KAAK,CAACI,WAAW;UAC3CC,QAAQ,EAAEX,WAAW,CAACM,KAAK,CAACK;;OAE/B,CAAC;MACF,MAAM,KAAI,CAACP,WAAW,CAACQ,iBAAiB,EAAE;IAAC;EAC7C;EAEMC,sBAAsB;IAAA;IAAA;MAC1B,MAAI,CAACT,WAAW,SAASL,iBAAiB,CAAC;QACzCM,MAAM,EAAEL,WAAW,CAACM,KAAK,CAACD,MAAM;QAChCE,QAAQ,EAAEP,WAAW,CAACM,KAAK,CAACC,QAAQ;QACpCC,mBAAmB,EAAE;UACnBC,YAAY,EAAET,WAAW,CAACM,KAAK,CAACI,WAAW;UAC3CC,QAAQ,EAAEX,WAAW,CAACM,KAAK,CAACK;;OAE/B,CAAC;MACF,MAAM,MAAI,CAACP,WAAW,CAACS,sBAAsB,EAAE;IAAC;EAClD;EAEMC,eAAe;IAAA;IAAA;MACnB,aAAa,MAAI,CAACV,WAAW,CAACU,eAAe,EAAE;IAAC;EAClD;EAEMC,MAAM;IAAA;IAAA;MACV,aAAa,MAAI,CAACX,WAAW,CAACW,MAAM,CAAC;QACnCR,QAAQ,EAAEP,WAAW,CAACM,KAAK,CAACC,QAAQ;QACpCS,YAAY,EAAE;UAACC,QAAQ,EAAE,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM;QAAE;OACrD,CAAC;IAAC;EACL;EAEMC,OAAO;IAAA;IAAA;MACX,MAAMC,IAAI,SAAS,MAAI,CAAClB,WAAW,CAACiB,OAAO,EAAE;MAC7C,OAAOC,IAAI;IAAC;EACd;;AA5CWrB,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAAsB,SAAXtB,WAAW;EAAAuB,YAFV;AAAM","names":["createAuth0Client","environment","AuthService","constructor","login","auth0Client","domain","auth0","clientId","authorizationParams","redirect_uri","redirectUri","audience","loginWithRedirect","handleRedirectCallback","isAuthenticated","logout","logoutParams","returnTo","window","location","origin","getUser","user","factory","providedIn"],"sourceRoot":"","sources":["C:\\Workspace\\NounouLagrauliere.github.io\\src\\app\\auth\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Auth0Client, createAuth0Client } from '@auth0/auth0-spa-js';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n  auth0Client!: Auth0Client;\n\n  constructor() { }\n\n  async login(): Promise<void> {\n    this.auth0Client = await createAuth0Client({\n      domain: environment.auth0.domain,\n      clientId: environment.auth0.clientId,\n      authorizationParams: {\n        redirect_uri: environment.auth0.redirectUri,\n        audience: environment.auth0.audience\n      }\n    });\n    await this.auth0Client.loginWithRedirect();\n  }\n\n  async handleRedirectCallback(): Promise<void> {\n    this.auth0Client = await createAuth0Client({\n      domain: environment.auth0.domain,\n      clientId: environment.auth0.clientId,\n      authorizationParams: {\n        redirect_uri: environment.auth0.redirectUri,\n        audience: environment.auth0.audience\n      }\n    });\n    await this.auth0Client.handleRedirectCallback();\n  }\n\n  async isAuthenticated(): Promise<boolean> {\n    return await this.auth0Client.isAuthenticated();\n  }\n\n  async logout(): Promise<void> {\n    return await this.auth0Client.logout({\n      clientId: environment.auth0.clientId,\n      logoutParams: {returnTo: `${window.location.origin}`}\n    });\n  }\n\n  async getUser(): Promise<any> {\n    const user = await this.auth0Client.getUser();\n    return user;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}